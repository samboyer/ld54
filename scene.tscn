[gd_scene load_steps=44 format=3 uid="uid://cgrvo2f81b5j"]

[ext_resource type="Script" path="res://Scripts/BeesManager.gd" id="1_86lkx"]
[ext_resource type="PackedScene" uid="uid://b1d1r1dq3pp15" path="res://Objects/game_ui.tscn" id="1_rbdpo"]
[ext_resource type="Script" path="res://Scripts/CameraController.gd" id="1_wwsk7"]
[ext_resource type="Script" path="res://main_menu.gd" id="2_j34x3"]
[ext_resource type="Texture2D" uid="uid://4kj685im4sft" path="res://Textures/reticule.png" id="3_7vrma"]
[ext_resource type="FontFile" uid="uid://bew83n532qq8x" path="res://Textures/Minimal5x7.ttf" id="3_af5uo"]
[ext_resource type="PackedScene" uid="uid://bht5qg7m7rfr8" path="res://Objects/room_starting.tscn" id="4_k6gwd"]
[ext_resource type="Script" path="res://Scripts/Reticule.gd" id="4_kaefo"]
[ext_resource type="PackedScene" uid="uid://do0tf23x6jrxe" path="res://Objects/room_test.tscn" id="5_jk71d"]
[ext_resource type="FontFile" uid="uid://cmd4ci37y7hqb" path="res://Textures/DINAlternate-Bold.ttf" id="5_sf16f"]
[ext_resource type="AudioStream" uid="uid://vatelb1typeq" path="res://SFX/room change.mp3" id="6_wwame"]
[ext_resource type="Script" path="res://Scripts/RoomManager.gd" id="7_ucf1y"]
[ext_resource type="Texture2D" uid="uid://bll4220pettl8" path="res://Textures/smoke.png" id="8_07fwu"]
[ext_resource type="AudioStream" uid="uid://dxhlar5tastot" path="res://Music/ogg/acid music 2 - kick.wav.ogg" id="12_v46tu"]
[ext_resource type="Script" path="res://BeatMatchTest.gd" id="13_87bt5"]
[ext_resource type="Script" path="res://MusicManager.gd" id="14_2goav"]
[ext_resource type="AudioStream" uid="uid://dpqgqts2dgad7" path="res://SFX/bee_shoot.mp3" id="14_6ux7t"]
[ext_resource type="AudioStream" uid="uid://bt7lnj5sujd0n" path="res://SFX/game_over.mp3" id="15_enrrg"]
[ext_resource type="AudioStream" uid="uid://c1s6j4vsdbw6r" path="res://Music/ogg/acid music 2 - 808.wav.ogg" id="15_sqorm"]
[ext_resource type="AudioStream" uid="uid://du8dvdtbjf2gc" path="res://Music/ogg/acid music 2 - bass 1.wav.ogg" id="16_ti4ac"]
[ext_resource type="AudioStream" uid="uid://m67jqq47nbkh" path="res://Music/ogg/acid music 2 - clap 1.wav.ogg" id="17_pupsa"]
[ext_resource type="AudioStream" uid="uid://cu56a5x21uj2d" path="res://Music/ogg/acid music 2 - clap 2.wav.ogg" id="18_p0h13"]
[ext_resource type="AudioStream" uid="uid://fm4nhgknwy7" path="res://Music/ogg/acid music 2 - crash.wav.ogg" id="19_q1m7b"]
[ext_resource type="AudioStream" uid="uid://5cg04rlgoscx" path="res://Music/ogg/acid music 2 - crashes.wav.ogg" id="20_27tox"]
[ext_resource type="AudioStream" uid="uid://3wmm68l0rcrp" path="res://Music/ogg/acid music 2 - drums top 1.wav.ogg" id="21_bn0mn"]
[ext_resource type="AudioStream" uid="uid://c3rtx6wuui8pj" path="res://Music/ogg/acid music 2 - drums top 2.wav.ogg" id="22_2q44p"]
[ext_resource type="AudioStream" uid="uid://0sumd6k2ywgx" path="res://Music/ogg/acid music 2 - drums top 3.wav.ogg" id="23_ythga"]
[ext_resource type="AudioStream" uid="uid://dye8vjdu1m1gj" path="res://Music/ogg/acid music 2 - drums top 4.wav.ogg" id="24_05sk0"]
[ext_resource type="AudioStream" uid="uid://cuh2say3fxs7" path="res://Music/ogg/acid music 2 - hats.wav.ogg" id="25_sdluc"]
[ext_resource type="AudioStream" uid="uid://cgtopb2ephn7g" path="res://Music/ogg/acid music 2 - rave 1.wav.ogg" id="26_rbfo6"]
[ext_resource type="AudioStream" uid="uid://cor5yg8eto4kv" path="res://Music/ogg/acid music 2 - rave 2.wav.ogg" id="27_f88gr"]
[ext_resource type="AudioStream" uid="uid://tqb18xsx5odm" path="res://Music/ogg/acid music 2 - rave 3.wav.ogg" id="28_hddhw"]
[ext_resource type="AudioStream" uid="uid://c8qlytthr5vr6" path="res://Music/ogg/acid music 2 - rave 4.wav.ogg" id="29_bvjmt"]
[ext_resource type="AudioStream" uid="uid://xcr4brng0kbt" path="res://Music/ogg/acid music 2 - rave 45.wav.ogg" id="30_72el7"]
[ext_resource type="AudioStream" uid="uid://3c1w06282ne2" path="res://Music/ogg/acid music 2 - sfx 1.wav.ogg" id="31_qoxib"]
[ext_resource type="AudioStream" uid="uid://st7g1u7qwj6k" path="res://Music/ogg/acid music 2 - snare.wav.ogg" id="32_g2i2r"]
[ext_resource type="AudioStream" uid="uid://c1xg5d5bsp5q" path="res://Music/ogg/acid music 2 - vox2.wav.ogg" id="33_4w50y"]
[ext_resource type="AudioStream" uid="uid://du36hadywxc6u" path="res://Music/ogg/acid music 2 - vox 1.wav.ogg" id="34_svoon"]
[ext_resource type="AudioStream" uid="uid://doxo1cu4xuddc" path="res://Music/ogg/acid music 2 - vox 3.wav.ogg" id="35_si2ry"]
[ext_resource type="AudioStream" uid="uid://bos10h27uxq6c" path="res://Music/ogg/acid music 2 - vox 4.wav.ogg" id="36_ffc8t"]
[ext_resource type="AudioStream" uid="uid://bhdrhis6m7hms" path="res://Music/ogg/acid music 2 - vox 5.wav.ogg" id="37_prqes"]
[ext_resource type="AudioStream" uid="uid://cwg3l51esbiky" path="res://Music/ogg/acid music 2 - vox 6.wav.ogg" id="38_ooso8"]

[sub_resource type="CircleShape2D" id="CircleShape2D_joq52"]

[node name="SCENE" type="Node2D"]

[node name="GAME OVER SCREEN" type="Node2D" parent="."]
visible = false
z_index = 1000

[node name="Game over" type="Label" parent="GAME OVER SCREEN"]
z_index = 1000
offset_left = -400.0
offset_top = -419.0
offset_right = 400.0
offset_bottom = 181.0
theme_override_fonts/font = ExtResource("5_sf16f")
theme_override_font_sizes/font_size = 330
text = "GAME"
horizontal_alignment = 1
vertical_alignment = 1
clip_text = true

[node name="Game over2" type="Label" parent="GAME OVER SCREEN"]
z_index = 1000
offset_left = -400.0
offset_top = -169.0
offset_right = 400.0
offset_bottom = 431.0
theme_override_fonts/font = ExtResource("5_sf16f")
theme_override_font_sizes/font_size = 330
text = "OVER"
horizontal_alignment = 1
vertical_alignment = 1
clip_text = true

[node name="mock main menu" type="Node2D" parent="GAME OVER SCREEN"]
script = ExtResource("2_j34x3")

[node name="Button" type="Button" parent="GAME OVER SCREEN/mock main menu"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -75.0
offset_top = 255.0
offset_right = 75.0
offset_bottom = 295.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("3_af5uo")
theme_override_font_sizes/font_size = 32
text = "RESTART"

[node name="UI" parent="." instance=ExtResource("1_rbdpo")]
z_index = 50

[node name="Camera2D" type="Camera2D" parent="." groups=["cameras"]]
script = ExtResource("1_wwsk7")

[node name="CanvasModulate" type="CanvasModulate" parent="Camera2D" groups=["CanvasModulate"]]

[node name="RoomManager" type="Node2D" parent="." node_paths=PackedStringArray("room_num_label", "room_swoosh_sfx", "bm", "mm") groups=["RoomManager"]]
script = ExtResource("7_ucf1y")
ROOM_TRANSITION_TIME_SECS = 1.0
room_starting = ExtResource("4_k6gwd")
room_main = ExtResource("5_jk71d")
room_num_label = NodePath("RoomTransitionLabel")
room_swoosh_sfx = NodePath("AudioStreamPlayer")
bm = NodePath("../BeesManager")
mm = NodePath("../I AM THE MUSIC MAN")

[node name="RoomTransitionLabel" type="Label" parent="RoomManager"]
visible = false
z_index = 1000
offset_left = -400.0
offset_top = -300.0
offset_right = 400.0
offset_bottom = 300.0
theme_override_fonts/font = ExtResource("5_sf16f")
theme_override_font_sizes/font_size = 500
text = "VXIII"
horizontal_alignment = 1
vertical_alignment = 1
clip_text = true

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="RoomManager"]
stream = ExtResource("6_wwame")

[node name="BeesManager" type="Node2D" parent="." node_paths=PackedStringArray("camera", "com_object", "bee_fire_sfx", "game_over_sfx", "game_over_panel", "mm") groups=["BeesManager"]]
script = ExtResource("1_86lkx")
attack_cooldown = 0.5
attack_jitter = 25.0
camera = NodePath("../Camera2D")
com_object = NodePath("centre_of_mass")
bee_fire_sfx = NodePath("bee_shoot")
game_over_sfx = NodePath("game_over")
game_over_panel = NodePath("../GAME OVER SCREEN")
mm = NodePath("../I AM THE MUSIC MAN")

[node name="Reticule" type="Node2D" parent="BeesManager"]
visible = false
z_index = 25
script = ExtResource("4_kaefo")

[node name="ReticuleOuter" type="Sprite2D" parent="BeesManager/Reticule"]
scale = Vector2(2, 2)
texture = ExtResource("3_7vrma")

[node name="ReticuleInner" type="Sprite2D" parent="BeesManager/Reticule"]
scale = Vector2(1.4, 1.4)
texture = ExtResource("3_7vrma")

[node name="centre_of_mass" type="Area2D" parent="BeesManager" groups=["bee_centre_of_mass"]]
collision_layer = 8
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="BeesManager/centre_of_mass"]
shape = SubResource("CircleShape2D_joq52")

[node name="Smoke" type="Sprite2D" parent="BeesManager/centre_of_mass"]
visible = false
texture = ExtResource("8_07fwu")

[node name="bee_shoot" type="AudioStreamPlayer" parent="BeesManager"]
stream = ExtResource("14_6ux7t")

[node name="game_over" type="AudioStreamPlayer" parent="BeesManager"]
stream = ExtResource("15_enrrg")

[node name="I AM THE MUSIC MAN" type="Node2D" parent="." node_paths=PackedStringArray("beat_match_effect")]
script = ExtResource("14_2goav")
music_layers = Array[AudioStream]([ExtResource("12_v46tu"), ExtResource("25_sdluc"), ExtResource("17_pupsa"), ExtResource("16_ti4ac"), ExtResource("27_f88gr"), ExtResource("20_27tox"), ExtResource("26_rbfo6"), ExtResource("15_sqorm"), ExtResource("22_2q44p"), ExtResource("31_qoxib"), ExtResource("28_hddhw"), ExtResource("29_bvjmt"), ExtResource("30_72el7"), ExtResource("19_q1m7b"), ExtResource("32_g2i2r"), ExtResource("21_bn0mn"), ExtResource("18_p0h13"), ExtResource("24_05sk0"), ExtResource("33_4w50y"), ExtResource("34_svoon"), ExtResource("38_ooso8"), ExtResource("23_ythga"), ExtResource("35_si2ry"), ExtResource("36_ffc8t"), ExtResource("37_prqes")])
beat_match_effect = NodePath("Beat match effects")

[node name="Beat match effects" type="Node2D" parent="I AM THE MUSIC MAN" node_paths=PackedStringArray("cam", "other_stuff_to_zoom")]
script = ExtResource("13_87bt5")
cam = NodePath("../../Camera2D")
other_stuff_to_zoom = [NodePath("../../UI")]

[connection signal="pressed" from="GAME OVER SCREEN/mock main menu/Button" to="GAME OVER SCREEN/mock main menu" method="_reload_scene"]
